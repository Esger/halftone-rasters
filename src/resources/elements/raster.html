<template class="raster--dotted"
		  style="--size: ${size}vmax;
				--angle: ${angle}deg;
		  		--image: url(${fileUrl});
		  		--rasterSize: ${interactive ? mouseX + 'px' : rasterSize + 'vmax'};
		  		--mapSliceAngle: ${360 / slices}deg;
				--mapHalfSliceAngle: ${180 / slices}deg;
		  		--rasterSliceAngle: ${360 / slices}deg;
				--rasterHalfSliceAngle: ${180 / slices}deg;">
	<require from="./raster.css"></require>
	<require from="../value-converters/y-to-angle"></require>

	<section portal=".controls">
		<fieldset>
			<label for="map">Map</label>
			<select value.bind="selectedMap"
					id="map"
					change.trigger="mapChanged(selectedMap)">
				<option repeat.for="map of maps"
						model.bind="map">${map.value}
				</option>
			</select>
		</fieldset>

		<fieldset if.bind="selectedMap.value == 'image'">
			<label for="file">Image</label>
			<input type="file"
					id="file"
					change.trigger="fileChanged($event)"
					accept="image/*"></label>
			<label for="file">${selectedFile || 'choose file'}</label>
		</fieldset>

		<fieldset if.bind="selectedMap.value == 'image'">
			<label for="grayscale">Grayscale</label>
			<input type="checkbox"
					data-grayscale.bind="grayscale"
					checked.bind="grayscale"
					change.trigger="settingChanged('grayscale', grayscale)"
					id="grayscale">
		</fieldset>

		<fieldset>
			<label for="interactiveRaster">Interactive</label>
			<input type="checkbox"
					checked.bind="interactiveRaster"
					change.trigger="settingChanged('interactive-raster', interactiveRaster)"
					id="interactiveRaster">
		</fieldset>

		<fieldset if.bind="!['conical', 'image'].includes(selectedMap.value.toLowerCase())">
			<label for.one-time="'size' + model.name">Size: ${size}vmax</label>
			<input type="range"
					id.one-time="'size' + model.name"
					autofocus
					step=".5"
					min=".5"
					max="100"
					value.bind="size"
					change.trigger="settingChanged('map-size', size)">
		</fieldset>

		<fieldset if.bind="selectedMap.value == 'conical'">
			<label for="mapSlices">Slices: ${mapSlices}</label>
			<input type="range"
					step="1"
					min="1"
					max="100"
					value.bind="mapSlices"
					id="mapSlices"
					input.trigger="settingChanged('map-slices', mapSlices)">
		</fieldset>

		<fieldset if.bind="['lined','dotted'].includes(selectedMap.value.toLowerCase())"
				  data-value="${selectedMap.value.toLowerCase()}">
			<label for.one-time="'angle' + model.name">Angle: ${angle}Â°</label>
			<input type="range"
					step=".1"
					min="0"
					max="90"
					disabled.bind="interactiveMap"
					value.bind="angle"
					id.one-time="'angle' + model.name"
					change.trigger="settingChanged('map-angle', angle)">
		</fieldset>

	</section>

</template>
